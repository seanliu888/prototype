<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <title>营销活动详情</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="chrome-compatibility.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f5f7fa;
        }
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(180deg, #1e3c72 0%, #2a5298 100%);
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        .sidebar .nav-link {
            color: rgba(255,255,255,0.8);
            padding: 12px 20px;
            margin: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            color: #fff;
            background-color: rgba(255,255,255,0.15);
        }
        .sidebar .nav-link i {
            margin-right: 10px;
            font-size: 1.1em;
        }
        .nav-section-title {
            color: rgba(255,255,255,0.5);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 15px 20px 8px 20px;
            margin-top: 10px;
        }
        .main-content {
            padding: 30px;
        }
        .page-header {
            background: white;
            padding: 25px 30px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .page-header h1 {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
            margin: 0;
        }
        .content-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        .brand-logo {
            padding: 25px 20px;
            color: white;
            font-size: 20px;
            font-weight: 700;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }
        .section-title i {
            margin-right: 10px;
            color: #3498db;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .info-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
        }
        .info-label {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        .info-value {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }
        .stats-card {
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        .stats-number {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        .stats-label {
            font-size: 14px;
            opacity: 0.9;
        }
        .log-table {
            font-size: 14px;
        }
        .log-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }
        .rule-box {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .rule-box h6 {
            font-size: 15px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .rule-box p {
            margin: 5px 0;
            font-size: 14px;
            color: #555;
        }
        .template-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            padding: 20px;
            color: white;
            margin-bottom: 15px;
        }
        .template-name {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .template-info {
            font-size: 14px;
            opacity: 0.9;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- 侧边栏 -->
            <div class="col-md-2 px-0 sidebar">
                <div class="brand-logo">
                    <i class="bi bi-ticket-perforated-fill me-2"></i>
                    eSIMtours管理系统
                </div>
                <nav class="nav flex-column">
                    <a class="nav-link" href="index.html">
                        <i class="bi bi-house-door-fill"></i>首页概览
                    </a>
                    
                    <div class="nav-section-title">模板配置</div>
                    <a class="nav-link" href="template-list.html">
                        <i class="bi bi-file-earmark-text"></i>优惠券模板
                    </a>
                    
                    <div class="nav-section-title">发券管理</div>
                    <a class="nav-link" href="coupon-list.html">
                        <i class="bi bi-ticket-detailed"></i>优惠码管理
                    </a>
                    <a class="nav-link" href="batch-list.html">
                        <i class="bi bi-layers"></i>批次管理
                    </a>
                    <a class="nav-link active" href="marketing-activity-list.html">
                        <i class="bi bi-megaphone"></i>营销活动
                    </a>
                    
                    <div class="nav-section-title">数据分析</div>
                    <a class="nav-link" href="usage-log.html">
                        <i class="bi bi-clock-history"></i>使用记录
                    </a>
                    <a class="nav-link" href="statistics.html">
                        <i class="bi bi-bar-chart-fill"></i>数据统计
                    </a>
                    <a class="nav-link" href="operation-log.html">
                        <i class="bi bi-journal-text"></i>操作日志
                    </a>
                    
                    <div class="nav-section-title">系统管理</div>
                    <a class="nav-link" href="dictionary/dict-type-list.html">
                        <i class="bi bi-book"></i>数据字典
                    </a>
                    
                    <div class="nav-section-title">帮助</div>
                    <a class="nav-link" href="help.html">
                        <i class="bi bi-question-circle-fill"></i>使用说明
                    </a>
                </nav>
            </div>

            <!-- 主内容区 -->
            <div class="col-md-10 main-content">
                <div class="page-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h1><i class="bi bi-megaphone me-2"></i><span id="activityName">邀请好友得优惠券</span></h1>
                            <small class="text-muted">
                                <span class="badge bg-success me-2" id="activityStatus">进行中</span>
                                活动ID: <span id="activityId">MA20251128001</span>
                            </small>
                        </div>
                        <div>
                            <button class="btn btn-outline-secondary" onclick="window.location.href='marketing-activity-list.html'">
                                <i class="bi bi-arrow-left me-1"></i>返回列表
                            </button>
                            <button class="btn btn-primary" onclick="editActivity()">
                                <i class="bi bi-pencil me-1"></i>编辑活动
                            </button>
                            <div class="btn-group">
                                <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    更多操作
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="pauseActivity()"><i class="bi bi-pause-circle me-2"></i>暂停活动</a></li>
                                    <li><a class="dropdown-item" href="#" onclick="copyActivity()"><i class="bi bi-copy me-2"></i>复制活动</a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item text-danger" href="#" onclick="deleteActivity()"><i class="bi bi-trash me-2"></i>删除活动</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 统计数据概览 -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="stats-card">
                            <div class="stats-number">1,234</div>
                            <div class="stats-label">触发次数</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <div class="stats-number">2,468</div>
                            <div class="stats-label">已发放券数</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <div class="stats-number">658</div>
                            <div class="stats-label">已使用</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <div class="stats-number">26.7%</div>
                            <div class="stats-label">使用率</div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-8">
                        <!-- 基本信息 -->
                        <div class="content-card">
                            <div class="section-title">
                                <i class="bi bi-info-circle-fill"></i>
                                基本信息
                            </div>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-tag"></i> 活动名称</div>
                                    <div class="info-value">邀请好友得优惠券</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-calendar-event"></i> 创建时间</div>
                                    <div class="info-value">2025-11-01 10:30:00</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-person"></i> 创建人</div>
                                    <div class="info-value">admin</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-clock-history"></i> 最后修改时间</div>
                                    <div class="info-value">2025-11-15 14:20:00</div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <div class="info-label"><i class="bi bi-file-text"></i> 活动描述</div>
                                <p class="mt-2" style="color: #555; font-size: 14px;">邀请好友注册成功即可获得优惠券奖励，邀请人和被邀请人双方都能得到优惠券。活动期间不限邀请次数，多邀多得！</p>
                            </div>
                        </div>

                        <!-- 触发条件 -->
                        <div class="content-card">
                            <div class="section-title">
                                <i class="bi bi-lightning-charge-fill"></i>
                                触发条件配置
                            </div>
                            <div class="rule-box">
                                <h6><i class="bi bi-check-circle text-success me-2"></i>触发类型</h6>
                                <p><strong>邀请好友注册成功</strong></p>
                                <p class="text-muted mb-0">当被邀请的新用户完成注册后，系统将自动触发发券流程</p>
                            </div>
                            <div class="rule-box">
                                <h6><i class="bi bi-gear-fill text-primary me-2"></i>触发规则</h6>
                                <p>• 被邀请人必须是新用户（首次注册）</p>
                                <p>• 需要通过邀请链接或邀请码注册</p>
                                <p class="mb-0">• 注册完成后立即触发发券</p>
                            </div>
                        </div>

                        <!-- 奖励设置 -->
                        <div class="content-card">
                            <div class="section-title">
                                <i class="bi bi-gift-fill"></i>
                                奖励设置
                            </div>
                            <div class="mb-3">
                                <h6 class="mb-3"><i class="bi bi-person-check me-2"></i>奖励对象</h6>
                                <span class="badge bg-primary" style="font-size: 14px; padding: 8px 15px;">双方都奖励</span>
                                <p class="text-muted mt-2 mb-0" style="font-size: 13px;">邀请人和被邀请人都将获得优惠券</p>
                            </div>
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <h6 class="mb-3"><i class="bi bi-ticket-detailed me-2"></i>邀请人奖励</h6>
                                    <div class="template-display">
                                        <div class="template-name">
                                            <i class="bi bi-gift me-2"></i>邀请好友专享券
                                        </div>
                                        <div class="template-info">
                                            <p class="mb-1"><i class="bi bi-currency-yen me-2"></i>优惠金额: ¥50</p>
                                            <p class="mb-1"><i class="bi bi-cart-check me-2"></i>使用门槛: 满¥200可用</p>
                                            <p class="mb-1"><i class="bi bi-hourglass-split me-2"></i>有效期: 自领取之日起7天</p>
                                            <p class="mb-0"><i class="bi bi-ticket-perforated me-2"></i>每次发放: 1张</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="mb-3"><i class="bi bi-ticket-detailed me-2"></i>被邀请人奖励</h6>
                                    <div class="template-display">
                                        <div class="template-name">
                                            <i class="bi bi-gift me-2"></i>新人满减券
                                        </div>
                                        <div class="template-info">
                                            <p class="mb-1"><i class="bi bi-currency-yen me-2"></i>优惠金额: ¥30</p>
                                            <p class="mb-1"><i class="bi bi-cart-check me-2"></i>使用门槛: 满¥100可用</p>
                                            <p class="mb-1"><i class="bi bi-hourglass-split me-2"></i>有效期: 自领取之日起7天</p>
                                            <p class="mb-0"><i class="bi bi-ticket-perforated me-2"></i>每次发放: 1张</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 限制条件 -->
                        <div class="content-card">
                            <div class="section-title">
                                <i class="bi bi-shield-check"></i>
                                限制条件
                            </div>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-person-badge"></i> 每人获得次数限制</div>
                                    <div class="info-value">不限制</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-bar-chart"></i> 活动总发放量限制</div>
                                    <div class="info-value">10,000 张</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-calendar-range"></i> 活动开始时间</div>
                                    <div class="info-value">2025-11-01 00:00:00</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="bi bi-calendar-x"></i> 活动结束时间</div>
                                    <div class="info-value">2025-12-31 23:59:59</div>
                                </div>
                            </div>
                            <div class="alert alert-info mt-3">
                                <i class="bi bi-info-circle me-2"></i>
                                <strong>提示：</strong>活动在设定的时间范围内自动生效，超出时间范围或达到发放上限后将自动停止发券。
                            </div>
                        </div>

                        <!-- 发放记录 -->
                        <div class="content-card">
                            <div class="section-title">
                                <i class="bi bi-list-check"></i>
                                最近发放记录
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover log-table">
                                    <thead>
                                        <tr>
                                            <th>时间</th>
                                            <th>触发用户</th>
                                            <th>获得用户</th>
                                            <th>优惠券</th>
                                            <th>数量</th>
                                            <th>状态</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>2025-11-28 14:30:25</td>
                                            <td>user_12345</td>
                                            <td>user_67890</td>
                                            <td>邀请好友专享券 (¥50)</td>
                                            <td>1张</td>
                                            <td><span class="badge bg-success">已发放</span></td>
                                        </tr>
                                        <tr>
                                            <td>2025-11-28 14:30:25</td>
                                            <td>user_12345</td>
                                            <td>user_67890</td>
                                            <td>新人满减券 (¥30)</td>
                                            <td>1张</td>
                                            <td><span class="badge bg-success">已发放</span></td>
                                        </tr>
                                        <tr>
                                            <td>2025-11-28 13:15:42</td>
                                            <td>user_11223</td>
                                            <td>user_44556</td>
                                            <td>邀请好友专享券 (¥50)</td>
                                            <td>1张</td>
                                            <td><span class="badge bg-success">已发放</span></td>
                                        </tr>
                                        <tr>
                                            <td>2025-11-28 13:15:42</td>
                                            <td>user_11223</td>
                                            <td>user_44556</td>
                                            <td>新人满减券 (¥30)</td>
                                            <td>1张</td>
                                            <td><span class="badge bg-success">已发放</span></td>
                                        </tr>
                                        <tr>
                                            <td>2025-11-28 11:08:33</td>
                                            <td>user_98765</td>
                                            <td>user_13579</td>
                                            <td>邀请好友专享券 (¥50)</td>
                                            <td>1张</td>
                                            <td><span class="badge bg-success">已发放</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="text-center mt-3">
                                <button class="btn btn-outline-primary" onclick="viewAllRecords()">
                                    <i class="bi bi-eye me-1"></i>查看全部记录
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 右侧信息栏 -->
                    <div class="col-md-4">
                        <!-- 活动状态 -->
                        <div class="content-card">
                            <div class="section-title" style="font-size: 16px;">
                                <i class="bi bi-activity"></i>
                                活动状态
                            </div>
                            <div class="text-center py-3">
                                <div class="mb-3">
                                    <i class="bi bi-check-circle-fill text-success" style="font-size: 48px;"></i>
                                </div>
                                <h5 class="text-success mb-2">活动进行中</h5>
                                <p class="text-muted" style="font-size: 13px;">系统正在监听触发条件，满足条件时自动发券</p>
                            </div>
                            <div class="d-grid gap-2 mt-3">
                                <button class="btn btn-warning" onclick="pauseActivity()">
                                    <i class="bi bi-pause-circle me-1"></i>暂停活动
                                </button>
                                <button class="btn btn-outline-secondary" onclick="viewLogs()">
                                    <i class="bi bi-journal-text me-1"></i>查看操作日志
                                </button>
                            </div>
                        </div>

                        <!-- 进度统计 -->
                        <div class="content-card">
                            <div class="section-title" style="font-size: 16px;">
                                <i class="bi bi-graph-up"></i>
                                发放进度
                            </div>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span style="font-size: 14px;">已发放 / 总上限</span>
                                    <span style="font-size: 14px; font-weight: 600;">2,468 / 10,000</span>
                                </div>
                                <div class="progress" style="height: 25px;">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 24.68%;" 
                                         aria-valuenow="24.68" aria-valuemin="0" aria-valuemax="100">24.68%</div>
                                </div>
                            </div>
                            <div class="alert alert-info mb-0">
                                <i class="bi bi-info-circle me-1"></i>
                                <small>还可发放 7,532 张优惠券</small>
                            </div>
                        </div>

                        <!-- 时间信息 -->
                        <div class="content-card">
                            <div class="section-title" style="font-size: 16px;">
                                <i class="bi bi-calendar-range"></i>
                                活动时间
                            </div>
                            <div class="mb-3">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="bi bi-calendar-check text-success me-2"></i>
                                    <span style="font-size: 13px; color: #7f8c8d;">开始时间</span>
                                </div>
                                <div style="font-size: 15px; font-weight: 600; margin-left: 28px;">2025-11-01 00:00:00</div>
                            </div>
                            <div class="mb-3">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="bi bi-calendar-x text-danger me-2"></i>
                                    <span style="font-size: 13px; color: #7f8c8d;">结束时间</span>
                                </div>
                                <div style="font-size: 15px; font-weight: 600; margin-left: 28px;">2025-12-31 23:59:59</div>
                            </div>
                            <div class="alert alert-success mb-0">
                                <i class="bi bi-hourglass-split me-1"></i>
                                <small>剩余 <strong>33</strong> 天</small>
                            </div>
                        </div>

                        <!-- 快捷操作 -->
                        <div class="content-card">
                            <div class="section-title" style="font-size: 16px;">
                                <i class="bi bi-lightning-charge"></i>
                                快捷操作
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary btn-sm" onclick="exportData()">
                                    <i class="bi bi-file-earmark-excel me-1"></i>导出发放记录
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="viewStatistics()">
                                    <i class="bi bi-bar-chart me-1"></i>查看详细统计
                                </button>
                                <button class="btn btn-outline-primary btn-sm" onclick="copyActivity()">
                                    <i class="bi bi-copy me-1"></i>复制为新活动
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 从URL获取活动ID（实际使用时）
        function getActivityId() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id') || 'MA20251128001';
        }

        // 编辑活动
        function editActivity() {
            alert('跳转到编辑页面\n\n这是静态演示页面，实际使用时会跳转到编辑界面。');
            // window.location.href = 'marketing-activity-edit.html?id=' + getActivityId();
        }

        // 暂停活动
        function pauseActivity() {
            if (confirm('确定要暂停此活动吗？\n\n暂停后将不再自动发放优惠券，可随时重新启用。')) {
                alert('活动已暂停\n\n这是静态演示页面，实际使用时会调用后端API。');
            }
        }

        // 复制活动
        function copyActivity() {
            if (confirm('确定要复制此活动吗？\n\n将创建一个配置相同的新活动。')) {
                alert('活动已复制\n\n这是静态演示页面，实际使用时会创建新活动并跳转到编辑页面。');
            }
        }

        // 删除活动
        function deleteActivity() {
            if (confirm('确定要删除此活动吗？\n\n删除后将无法恢复，但已发放的优惠券不受影响。')) {
                alert('活动已删除\n\n这是静态演示页面，实际使用时会调用后端API并返回列表页。');
                // window.location.href = 'marketing-activity-list.html';
            }
        }

        // 查看全部记录
        function viewAllRecords() {
            alert('查看全部发放记录\n\n这是静态演示页面，实际使用时会跳转到完整的发放记录列表。');
            // window.location.href = 'marketing-activity-records.html?id=' + getActivityId();
        }

        // 查看操作日志
        function viewLogs() {
            alert('查看操作日志\n\n这是静态演示页面，实际使用时会显示该活动的所有操作记录。');
        }

        // 导出数据
        function exportData() {
            alert('导出发放记录\n\n这是静态演示页面，实际使用时会下载Excel文件。');
        }

        // 查看统计
        function viewStatistics() {
            alert('查看详细统计\n\n这是静态演示页面，实际使用时会跳转到统计分析页面。');
            // window.location.href = 'statistics.html?activityId=' + getActivityId();
        }

        // 页面加载时初始化
        window.onload = function() {
            const activityId = getActivityId();
            console.log('当前查看的活动ID:', activityId);
            // 实际使用时这里会调用API加载活动详情
        };
    </script>
</body>
</html>




